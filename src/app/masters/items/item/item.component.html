<form #hospitalForm="ngForm" [formGroup]="itemForm" (keydown.enter)="$event.preventDefault()" (ngSubmit)="onSubmit()"
  class="full-height">
  <h6 class="border border-primary p-2 mt-3 mb-4 bg-light text-white">Item Details</h6>

  <div class="form-group row">
    <div class="col-sm-6 d-flex align-items-center">
      <div class="d-inline mr-3">
        <label id="addItemLabelItemType" class="mb-0">Item Type</label>
      </div>
      <div class="custom-control d-inline custom-radio mr-3">
        <input name="medicalOrNonMedical" type="radio" class="custom-control-input" value="M"
          formControlName="medicalOrNonMedical" id="medical">
        <label id="addItemLabelMedical" class="custom-control-label" for="medical">Medical</label>
      </div>
      <div class="custom-control d-inline custom-radio">
        <input name="medicalOrNonMedical" type="radio" class="custom-control-input" value="N"
          formControlName="medicalOrNonMedical" id="non-medical">
        <label id="addItemLabelNonMedical" class="custom-control-label" for="non-medical">Non Medical</label>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-4">
      <div class="form-group row">
        <label id="addItemLabelName" for="" class="col-sm-3 col-form-label pr-0 text-right">Name <span
            class="text-danger">*</span></label>
        <div class="col-sm-9">
          <input id="addItemName" type="text" class="form-control" formControlName="itemName" placeholder="Item Name">
          <div *ngIf="itemForm.get('itemName')?.touched" class="error-msg-common text-danger">
            <div *ngIf="itemForm.get('itemName')?.errors?.required">
              * required field
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label id="addItemLabelCode" for="" class="col-sm-3 col-form-label pr-0 text-right">Code </label>
        <div class="col-sm-9">
          <input id="addItemCode" type="text" class="form-control" formControlName="itemCode" placeholder="Item Code">
        </div>
      </div>
      <div class="form-group row">
        <label id="addItemLabelDescription" for="" class="col-sm-3 col-form-label pr-0 text-right">Desc <span
            class="text-danger">*</span></label>
        <div class="col-sm-9">
          <input id="addIitemDescription" type="text" class="form-control" formControlName="itemDescription"
            placeholder="Item Description">
          <div *ngIf="itemForm.get('itemDescription')?.touched" class="error-msg-common text-danger">
            <div *ngIf="itemForm.get('itemDescription')?.errors?.required">
              * required field
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="form-group row">
        <label id="addItemLabelGroupCode" for="" class="col-sm-3 col-form-label pr-0 text-right">Group<span
            class="text-danger">*</span>
        </label>
        <div class="col-sm-9">
          <ng-select id="addItemGroupCode" [items]="itemGroups" bindLabel="groupName" [(ngModel)]="selectedGroupCode"
            formControlName="itemGroup" placeholder="-- Select --" (change)="onGroupCodeChanged($event)">
          </ng-select>
          <div *ngIf="itemForm.get('itemGroup')?.touched" class="error-msg-common text-danger">
            <div *ngIf="itemForm.get('itemGroup')?.errors?.required">
              * required field
            </div>
          </div>
        </div>
      </div>

      <div class="form-group row">
        <label id="addItemLabelGenericCode" for="" class="col-sm-3 col-form-label pr-0 text-right">Generic <span
            class="text-danger">*</span>
        </label>
        <div class="col-sm-9">
          <ng-select id="addItemGenericCode" [items]="itemGenericNames" bindLabel="genericName"
            formControlName="itemGenericName" placeholder="- Group Dependency -" [(ngModel)]="selectedGenericCode"
            (change)="onGenericCodeChanged($event)">
          </ng-select>
          <div *ngIf="itemForm.get('itemGenericName')?.touched" class="error-msg-common text-danger">
            <div *ngIf="itemForm.get('itemGenericName')?.errors?.required">
              * required field
            </div>
          </div>
        </div>
      </div>


      <div class="form-group row">
        <label id="addItemLabelCategory" for="" class="col-sm-3 col-form-label pr-0 text-right">Category
        </label>
        <div class="col-sm-9">
          <ng-select id="addItemCategory" [items]="itemCategories" bindLabel="categoryName" placeholder="-- Select --"
            (change)="onItemCategoryChanged($event)" [ngModelOptions]="{standalone: true}"
            [(ngModel)]="selectedCategory">
          </ng-select>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="form-group row">
        <label id="addItemLabelSpecialization" for="" class="col-sm-3 col-form-label pr-0 text-right">Specialization
        </label>
        <div class="col-sm-9">
          <ng-select id="addItemSpecialization" [items]="specializations" bindLabel="specializationName"
            placeholder="-- Select --" [ngModelOptions]="{standalone: true}" [(ngModel)]="selectedSpecialization"
            (change)="onSpecilizationChanged($event)">
          </ng-select>
        </div>
      </div>
      <div class="form-group row">
        <label id="addItemLabelManufacturer" for="" class="col-sm-3 col-form-label pr-0 text-right">Manufacturer <span
          class="text-danger">*</span>
        </label>
        <div class="col-sm-9">
          <ng-select id="addItemManufacturer" [items]="manufacturerlist" bindLabel="name" placeholder="-- Select --"
            (change)="onManufacturerChanged($event)" [(ngModel)]="selectedManufacturer"
            formControlName="manufacturer">
          </ng-select>
          <div *ngIf="itemForm.get('manufacturer')?.touched" class="error-msg-common text-danger">
            <div *ngIf="itemForm.get('manufacturer').errors?.required">
              * required field
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label id="addItemLabelFormCode" for="" class="col-sm-3 col-form-label pr-0 text-right">Form <span
          class="text-danger">*</span>
        </label>
        <div class="col-sm-9">
          <ng-select id="addItemFormCode" [items]="itemForms" bindLabel="formCode" placeholder="-- Select --"
             [(ngModel)]="selectedFormCode" (change)="onFormCodeChanged($event)"
            formControlName="itemForm">
          </ng-select>
          <div *ngIf="itemForm.get('itemForm')?.touched" class="error-msg-common text-danger">
            <div *ngIf="itemForm.get('itemForm').errors?.required">
              * required field
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <h6 class="border border-primary p-2 mt-3 mb-4 bg-light text-white">Item Details 2</h6>

  <div class="row">
    <div class="col-lg-4">
      <div class="form-group row">
        <label id="addItemLabelSpecification" for="" class="col-sm-3 col-form-label pr-0 text-right">Specification
        </label>
        <div class="col-sm-9">
          <input id="addItemSpecification" type="text" class="form-control" formControlName="specification"
            placeholder="Specification">
        </div>
      </div>
      <div class="form-group row">
        <label id="addItemLabelTemperature" for="" class="col-sm-3 col-form-label pr-0 text-right">Temperature
        </label>
        <div class="col-sm-9">
          <input id="addItemTemperature" type="text" class="form-control" formControlName="temperature"
            placeholder="Temperature">
        </div>
      </div>
      <div class="form-group row">
        <label id="itemLabelUsage" for="" class="col-sm-3 col-form-label pr-0 text-right">Usage </label>
        <div class="col-sm-9">
          <input id="itemUsage" type="text" class="form-control" formControlName="itemUsage" placeholder="Usage">
        </div>
      </div>
      <div class="form-group row">
        <label id="" for="" class="col-sm-3 col-form-label pr-0 text-right">Rack No</label>
        <div class="col-sm-9">
          <input id="" type="text" class="form-control" formControlName="rackNumber" placeholder="Rack Number">
        </div>
      </div>
      <div class="form-group row">
        <label id="" for="" class="col-sm-3 col-form-label pr-0 text-right">Shelf No</label>
        <div class="col-sm-9">
          <input id="" type="text" class="form-control" formControlName="shelfNumber" placeholder="Shelf Number">
        </div>
      </div>
      <div class="form-group row">
        <label id="" for="" class="col-sm-3 col-form-label pr-0 text-right">Latin Code
        </label>
        <div class="col-sm-9">
          <ng-select id="" [items]="latinCodes" bindLabel="latinShortCodeDesc" placeholder="-- Select --"
            (change)="onLatinCodeChanged($event)" [(ngModel)]="selectedLatinCode" [ngModelOptions]="{standalone: true}">
          </ng-select>
        </div>
      </div>
      <div class="form-group row">
          <label id="" for="" class="col-sm-3 col-form-label pr-0 text-right">Storage
          </label>
          <div class="col-sm-9">
            <ng-select id="" [items]="storages" bindLabel="name" [ngModelOptions]="{standalone: true}"
              placeholder="-- Select --" [(ngModel)]="selectedStorage">
            </ng-select>
          </div>
        </div>
    </div>
    <div class="col-lg-4">
      <div class="form-group row">
        <label id="itemLabelDosage" for="" class="col-sm-3 col-form-label pr-0 text-right">Dosage </label>
        <div class="col-sm-9">
          <input id="itemDosage" type="text" class="form-control" formControlName="drugDose" placeholder="Dosage">
        </div>
      </div>

     

      <div class="form-group row">
        <label id="addItemLabelPurchaseUOM" for="" class="col-sm-3 col-form-label pr-0 text-right">Purch UOM<span
            class="text-danger">*</span>
        </label>
        <div class="col-sm-9">
          <ng-select id="addItemPurchaseUOM" [items]="purchaseUOMS" bindLabel="measurementDesc"
            formControlName="purchaseUnitMeasurementId" [(ngModel)]="selectedPurchaseUom"
            (change)="onPurchaseUOMChanged($event)" placeholder="-- Select --">
          </ng-select>
          <div *ngIf="itemForm.get('purchaseUnitMeasurementId')?.touched" class="error-msg-common text-danger">
            <div *ngIf="itemForm.get('purchaseUnitMeasurementId')?.errors?.required">
              * required field
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label id="addItemLabelIssueUOM" for="" class="col-sm-3 col-form-label pr-0 text-right">Issue UOM<span
            class="text-danger">*</span>
        </label>
        <div class="col-sm-9">
          <ng-select id="addItemIssueUOM" [items]="issueUOMS" bindLabel="measurementDesc" [(ngModel)]="selectedIssueUom"
            (change)="onIssueUOMChanged($event)" formControlName="issueUnitOfMeasurementId" placeholder="-- Select --">
          </ng-select>
          <div *ngIf="itemForm.get('issueUnitOfMeasurementId')?.touched" class="error-msg-common text-danger">
            <div *ngIf="itemForm.get('issueUnitOfMeasurementId')?.errors?.required">
              * required field
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label id="" for="" class="col-sm-3 col-form-label pr-0 text-right">ReOrder Lvl</label>
        <div class="col-sm-9">
          <input id="" type="text" class="form-control" formControlName="reOrderLevel" placeholder="ReOrder Level">
          <div *ngIf="itemForm.get('reOrderLevel')?.invalid" class="error-msg-common text-danger">
            <div *ngIf="!itemForm.get('reOrderLevel').errors?.required && itemForm?.get('reOrderLevel')?.errors">
              * not a valid input
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label id="" for="" class="col-sm-3 col-form-label pr-0 text-right">ReOrder Qty</label>
        <div class="col-sm-9">
          <input id="" type="text" class="form-control" formControlName="reOrderQuantity" placeholder="ReOrder Qty">
          <div *ngIf="itemForm.get('reOrderQuantity')?.invalid" class="error-msg-common text-danger">
            <div *ngIf="!itemForm.get('reOrderQuantity').errors?.required && itemForm?.get('reOrderQuantity')?.errors">
              * not a valid input
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label id="" for="" class="col-sm-3 col-form-label pr-0 text-right">Alert Msg
        </label>
        <div class="col-sm-9">
          <ng-select id="" [items]="Alert" bindLabel="alertMessage" [ngModelOptions]="{standalone: true}"
            placeholder="-- Select --" [(ngModel)]="selectedAlertMessage">
          </ng-select>
        </div>
      </div>
      <div class="form-group row">
        <label for="" class="col-sm-3 col-form-label pr-0 text-right" id="">Tax <span class="text-danger">*</span></label>
        <div class="col-sm-9">
          <ng-select [items]="taxArray" placeholder="--Select--" id="" bindLabel="categoryCode" [(ngModel)]="selectedTax"
            formControlName="tax" >
          </ng-select>
          <div *ngIf="itemForm.get('tax')?.touched" class="error-msg-common text-danger">
              <div *ngIf="itemForm.get('tax').errors?.required">
                * required field
              </div>
            </div>
        </div>
      </div>
      <!-- <div class="form-group row">
        <label id="" for="" class="col-sm-3 col-form-label pr-0 text-right">Storage
        </label>
        <div class="col-sm-9">
          <ng-select id="" [items]="storages" bindLabel="name" [ngModelOptions]="{standalone: true}"
            placeholder="-- Select --" [(ngModel)]="selectedStorage">
          </ng-select>
        </div>
      </div> -->
    </div>
    <div class="col-lg-4 ">
      <div class="form-group row">
        <label id="itemLabelPack" for="" class="col-sm-3 col-form-label pr-0 text-right">Pack<span class="text-danger">*</span></label>
        <div class="col-sm-9">
          <input id="itemPack" type="text" class="form-control" formControlName="pack" placeholder="Pack">
        </div>
      </div>
      <div class="form-group row">
        <div class="col-sm-12 d-flex">
          <div class="d-inline mr-3">
            <label id="addItemLabelStatus" class="mb-0">Status</label>
          </div>
          <div class="custom-control d-inline custom-radio mr-3">
            <input name="activeS" type="radio" class="custom-control-input" value="Y" formControlName="activeS"
              id="activate">
            <label id="addItemLabelActivate" class="custom-control-label" for="activate">Activate</label>
          </div>
          <div class="custom-control d-inline custom-radio">
            <input name="activeS" type="radio" class="custom-control-input" value="N" formControlName="activeS"
              id="deActivate">
            <label id="addItemLabelDeActivate" class="custom-control-label" for="deActivate">De Activate</label>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-8">

      <div class="form-group row">
        <label id="" for="" class="col-sm-2 col-form-label pr-0 text-right">Sch Code
        </label>
        <div class="col-sm-10">
          <ng-select id="" [items]="scheduleCodes" bindLabel="scheduleCategoryDesc" placeholder="-- Select --"
            [ngModelOptions]="{standalone: true}" [(ngModel)]="selectedScheduleCode"
            (change)="onScheduleCodeChanged($event)">
          </ng-select>
        </div>
      </div>
    </div>
  </div>

  <h6 class="border border-primary p-2 mt-3 mb-4 bg-light text-white">Alternative Item Details</h6>

  <div class="row">
    <div class="col-lg-4">
      <div class="form-group row">
        <label id="itemLabelUnmappedItem" for="" class="col-sm-3 col-form-label pr-0 text-right">Item </label>
        <div class="col-sm-9">
          <ng-select id="itemUnMappeditem" [items]="unMappedItems" multiple="true" bindLabel="itemName"
            [ngModelOptions]="{standalone: true}" [(ngModel)]="selectedAlternateDrugs" placeholder="-- Select --"
            (change)="onUnMappedCheckedItems($event)" (keyup)="alternativeItemSearch($event)">
          </ng-select>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col mb-3 pt-2 text-center">
      <button (click)="onSubmit()" type="submit" [disabled]="checkFormDisability()" id="mu-adduser-save"
        class="btn btn-primary px-4">Save</button>
      <input type="button" class="btn btn-secondary px-4 ml-3" value="Cancel"
        (click)="reset();itemForm.controls.activeS.setValue('Y');itemForm.controls.medicalOrNonMedical.setValue('M')"
        id="mu-adduser-cancel">
    </div>
  </div>
  <ng4-loading-spinner [loadingText]="'Please wait...'" [timeout]="400000000"> </ng4-loading-spinner>
</form>
